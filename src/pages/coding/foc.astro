---
// src/pages/games/foc.astro
import Layout from "../../layouts/Layout.astro";

const pageTitle = "FOC — Play Online";
const gamePath = "/games/FOC/index.html";
const playStoreUrl = "https://play.google.com/store/apps/details?id=com.ZanyInc.FOC";
---

<Layout title={pageTitle} description="Play FOC (portrait 9:16) — Unity WebGL.">
  <style>
    .foc-wrap {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.25rem;
      margin-inline: auto;
    }
    @media (min-width: 980px) {
      .foc-wrap {
        grid-template-columns: 1.1fr .9fr;
        align-items: start;
      }
    }

    .game-title {
      margin: 0;
      font-size: var(--h1-size);
      font-weight: 700;
      letter-spacing: -0.01em;
      line-height: calc(var(--line) - .15);
      color: var(--text);
    }

    .about-col p,
    .about-col ul {
      margin: 0 0 1rem 0;
      color: var(--text);
      font-size: var(--body-size);
      line-height: 1.5;
    }
    .about-col ul { padding-left: 1.25rem; }

    .about-col a {
      color: var(--text);
      text-decoration: underline;
    }
    .about-col a:hover {
      color: var(--muted);
    }

    /* ========== Game Stage (fills viewport height, preserves 9:16) ========== */
    .stage {
      position: relative;
      margin: 0 auto;
      overflow: hidden;
      max-width: 100%;
      background: #000;
      border-radius: none;
      border: none;
    
      /* Fit within viewport height, no scroll */
      height: calc(80svh - 2rem); /* subtract small padding for header/footer */
      max-height: 100%;
      aspect-ratio: 9 / 16;
    
      /* Width auto-calculated from aspect-ratio */
      width: auto;
    }
    .stage iframe {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      border: 0;
      display: block;
    }

    .actions {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: .75rem;
      margin-top: .75rem;
    }

    .btnrow {
      display: flex;
      flex-wrap: wrap;
      gap: .5rem;
      margin-top: .5rem;
    }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      gap: .5rem;
      padding: .55rem .8rem;
      border-radius: none;
      border: none;
      background: var(--card);   /* muted theme-aware background */
      color: var(--text);
      cursor: pointer;
      text-decoration: none;
      transition: transform .02s ease, background .15s ease;
    }
    .btn:hover { background: var(--hover); }
    .btn:active { transform: translateY(1px); }

    /* H2-style button */
    .btn.h2 {
      font-size: var(--h2-size);
      font-weight: 700;
      letter-spacing: -0.01em;
      line-height: 1.1;
      border-radius: 12px;
    }

    .btn.primary {
      background: var(--card);
      color: var(--text);
      border-color: var(--border);
    }

    .muted { color: var(--muted); }
  </style>

  <section class="content foc-wrap">
    <!-- Left column: About -->
    <div class="about-col">
      <h1 class="game-title">Furthest On Circle</h1>
      <p>An arcade style game that will test your skills. The only challenge is how well you can aim the ball and how quickly you can shoot!</p>
       <!-- Google Play link -->
      <p>
        <a href={playStoreUrl} target="_blank" rel="noopener noreferrer">Google Play ↗</a>
      </p>
      <h2>How to play</h2>
      <p>
        Beat the expanding circles and get the ball to the other end of the screen to
        hit the target. Think quick and pull and drag the ball to aim and shoot!
      </p>
      <p>◉ Easy - Two expanding circles.</p>
      <p>◉ Medium - Three expanding circles and a moving target.</p>
      <p>◉ Hard - Infinite expanding circles!</p>
      <!-- Buttons: fullscreen + reload -->
      <div class="btnrow">
        <!--<button class="btn h2 primary" id="btn-fullscreen" type="button">Enter Fullscreen</button>-->
        <button class="btn h2 primary" id="btn-reload" type="button">Reload</button>
      </div>
    </div>

    <!-- Right column: Game -->
    <aside>
      <div class="stage">
        <iframe
          id="gameframe"
          src={gamePath}
          allow="fullscreen; gamepad; xr-spatial-tracking"
          scrolling="no"
          loading="eager"
          title="FOC game"
        ></iframe>
      </div>
    </aside>
  </section>

  <script>
    const frame = document.getElementById("gameframe");
    const fsBtn = document.getElementById("btn-fullscreen");
    const reloadBtn = document.getElementById("btn-reload");

    fsBtn?.addEventListener("click", async () => {
      try {
        if (document.fullscreenElement) {
          await document.exitFullscreen();
          fsBtn.textContent = "Enter Fullscreen";
        } else {
          await frame.requestFullscreen();
          fsBtn.textContent = "Exit Fullscreen";
        }
      } catch (e) { console.error(e); }
    });

    reloadBtn?.addEventListener("click", () => {
      frame.src = frame.src; // hard reload
    });
  </script>
</Layout>

---
import Layout from "../layouts/Layout.astro";

const papers = [
  {
    title:
      "Optimizing Prepositioning of Equipment and Personnel for Los Angeles County Fire Department to Fight Wildland Fires",
    authors: "Gerald Brown, Robert A. Koyak, Javier Salmerón, Zachary Scholz",
    venue: "INFORMS Journal on Applied Analytics (2021)",
    pdf: "/papers/Scholz NPS Thesis.pdf",
    external: "https://pubsonline.informs.org/doi/abs/10.1287/inte.2021.1084",
    summary:
      "Every day, the Los Angeles County Fire Department uses weather forecasts and automated real-time weather observations, together with field-tested moisture content of soil and vegetation, to decide whether and where to position firefighting equipment and personnel, as well as what equipment to use, for the following day. Anticipating a particularly hazardous “red flag” day, they activate off-duty personnel and reserve equipment and add these to the total augmented, prepositioned force. Analysis of years of detailed daily data can advise these costly decisions. Three models, respectively, predict for each region of the county the probability of a fire start, the area burned by a fire given any particular package of equipment and personnel preassigned to fight it, and which packages to form and send to each position. The conflicting objectives are to minimize the expected number of citizens evacuated and the constrained augmentation cost for personnel and equipment.",
  },
  {
    title:
      "Evaluation of HEU surrogate sources for use in training and modeling",
    authors: "Zachary Scholz, Marshall Millett, Matthew Schell",
    venue: "Nuclear Instruments and Methods in Physics Research Section A: Accelerators, Spectrometers, Detectors and Associated Equipment (2018)",
    pdf: "/papers/Scholz USNA Thesis.pdf",
    external:
      "https://www.sciencedirect.com/science/article/abs/pii/S0168900218312002",
    summary:
      "Surrogate radiation sources are used to test detection equipment and train security personnel in the detection and interdiction of special nuclear material (SNM). Some current surrogate sources do not accurately match SNM energy spectra, including for HEU. In this research, we propose and investigate novel source configurations for higher fidelity surrogate SNM sources using thermal neutron capture reactions that result in prompt gammas. The objective is to create a surrogate source that has a more representative spectrum, low cost, and requires minimal security, special handling, and safety precautions.",
  },
];
---
<Layout title="Research — Zach Scholz" description="Optimization, geospatial analytics, decision-support.">
  <section class="research-wrap content">
    <div class="spacer-md" aria-hidden="true"></div>

    <section class="accordion" aria-label="Research papers">
      {papers.map((p, i) => (
        <div class="acc" id={`acc-paper-${i}`}>
          <button
            class="acc-summary"
            type="button"
            aria-expanded="false"
            aria-controls={`panel-paper-${i}`}
            id={`btn-paper-${i}`}
          >
            <span class="acc-toggle" aria-hidden="true"></span>
            <span class="acc-title">{p.title}</span>
          </button>

          <div
            class="acc-panel"
            id={`panel-paper-${i}`}
            role="region"
            aria-labelledby={`btn-paper-${i}`}
          >
            <div class="block">
              <p>{p.authors}</p>
              <p><em>{p.venue}</em></p>
              <p class="muted">{p.summary}</p>
            </div>

            <ul class="stack gray-hover links" aria-label="Paper links">
              <li class="stack-item hoverable">
                <a href={encodeURI(p.pdf)} target="_blank" rel="noopener">PDF</a>
              </li>
              <li class="stack-item hoverable">
                <a href={p.external} target="_blank" rel="noopener">Publisher ↗</a>
              </li>
            </ul>
          </div>
        </div>
      ))}
    </section>
  </section>

  <!-- Accordion JS -->
  <script type="module">
    const accRoot = document.querySelector('.accordion');
    if (!accRoot) throw new Error('Accordion root not found');

    const items   = Array.from(accRoot.querySelectorAll('.acc'));
    const buttons = items.map(i => i.querySelector('.acc-summary'));
    const panels  = items.map(i => i.querySelector('.acc-panel'));

    function openPanel(panel) {
      panel.hidden = false;
      panel.style.display = 'block';
      const startHeight = panel.offsetHeight;
      const target = panel.scrollHeight;
      panel.style.height = startHeight + 'px';
      panel.getBoundingClientRect();
      panel.style.height = target + 'px';
      panel.classList.add('animating');
      panel.addEventListener('transitionend', function done(ev){
        if (ev.propertyName !== 'height') return;
        panel.removeEventListener('transitionend', done);
        panel.classList.remove('animating');
        panel.style.height = 'auto';
      });
    }

    function closePanel(panel) {
      const current = panel.offsetHeight;
      panel.style.height = current + 'px';
      panel.getBoundingClientRect();
      panel.style.height = '0px';
      panel.classList.add('animating');
      panel.addEventListener('transitionend', function done(ev){
        if (ev.propertyName !== 'height') return;
        panel.removeEventListener('transitionend', done);
        panel.classList.remove('animating');
        panel.style.display = 'none';
        panel.hidden = true;
      });
    }

    let openIndex = -1;
    panels.forEach(p => { p.style.display = 'none'; p.hidden = true; p.style.height = '0px'; });

    function setOpen(idx) {
      items.forEach((_, i) => {
        const shouldOpen = i === idx;
        buttons[i].setAttribute('aria-expanded', String(shouldOpen));
        const p = panels[i];
        if (shouldOpen) {
          if (p.hidden || p.style.display === 'none' || p.style.height === '0px') openPanel(p);
        } else {
          if (!p.hidden && p.style.display !== 'none' && p.style.height !== '0px') closePanel(p);
        }
      });
      openIndex = idx;
    }

    function activate(i, evt) {
      if (evt) evt.preventDefault();
      const next = (openIndex === i) ? -1 : i;
      setOpen(next);
    }

    buttons.forEach((btn, i) => {
      btn.addEventListener('click', (e) => activate(i, e));
      btn.addEventListener('keydown', (e) => {
        if (e.key === ' ' || e.key === 'Enter') activate(i, e);
      });
    });
  </script>

  <style>
    .research-wrap{display:grid;gap:12px;justify-items:start;align-items:start;margin-inline:auto}

    .spacer-md{ height: clamp(24px, 6vh, 64px); width: 100%; }
    .muted{color:var(--text)}

    .accordion{
      display:grid; gap:12px; justify-items:start;
      width:100%; margin:0;
    }
    .acc{ width:100%; background:transparent; }

    .acc-summary {
      width: 100%;
      display: grid;
      grid-template-columns: 1.25rem 1fr;
      align-items: start;
      gap: 0.6rem;
      padding: 6px 0;
      cursor: pointer;
      user-select: none;
      color: var(--text);
      background: none;
      border: 0;
    }

    .acc-toggle {
      align-self: start;
      height: calc(var(--h1-size) * (var(--line) - 0.15));
      display: flex;
      align-items: center;
      justify-content: center;
      width: 1.25rem;
      font-size: calc(var(--h1-size) * 0.82);
      font-weight: 1000;
      line-height: 1;
      color: var(--text);
      text-align: center;
    }

    .acc-toggle::before { content: '+'; }
    .acc-summary[aria-expanded="true"] .acc-toggle::before { content: '–'; }

    .acc-title {
      margin: 0;
      text-align: left;
      font-size: var(--h1-size);
      font-weight: 1000;
      letter-spacing: -0.01em;
      line-height: calc(var(--line) - .15);
      color: var(--text);
    }

    .acc-panel {
      padding-left: calc(1.25rem + 0.6rem);
      margin: 0;
      display: block;
      height: 0;
      overflow: hidden;
      overflow-anchor: none;
      transition: height 220ms ease;
      font-size: var(--body-size);
      line-height: 1.45;
      color: var(--text);
    }

    .block{ width:100%; margin:0; display:grid; gap:.25rem }
    .block p { margin:0 }

    .stack{list-style:none;padding:0;margin:.25rem 0 0}
    .stack-item{padding:0}

    .accordion a,
    .accordion a:visited { color: inherit; text-decoration: none; }
    .accordion a:hover { text-decoration: underline; }
    
    /* Paper meta hierarchy (block = authors, venue, summary in that order) */
    .block p:nth-child(1){              /* Authors */
      font-weight: 600;
      font-size: clamp(16px, 1.6vw, 18px);
      letter-spacing: 0.005em;
      color: var(--text);
    }
    
    .block p:nth-child(2){              /* Venue */
      color: var(--text);
      font-weight: 500;
      font-size: clamp(15px, 1.4vw, 17px);
      margin-top: 2px;
    }
    
    .block p:nth-child(3){              /* Summary */
      margin-top: .4rem;
      color: var(--text);
      font-weight: 400;
      font-size: clamp(15px, 1.5vw, 17px);
      line-height: 1.6;
      /* optional subtle contrast boost for readability */
      opacity: .95;
    }
    
    /* Optional: add a soft divider between summary and link row */
    .block + .links {
      margin-top: .6rem;
      padding-top: .6rem;
      border-top: 1px solid var(--border);
    }
    
    /* Finish your gray-hover effect (the snippet was cut off) */
    .gray-hover:hover .hoverable { 
      filter: grayscale(1) brightness(.85);
      opacity: .7;
      transition: filter 160ms ease, opacity 160ms ease;
    }
    .gray-hover .hoverable:hover {
      filter: none;
      opacity: 1;
    }
</style>

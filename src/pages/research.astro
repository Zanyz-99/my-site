---
import Layout from "../layouts/Layout.astro";

const papers = [
  {
    title:
      "Optimizing Prepositioning of Equipment and Personnel for Los Angeles County Fire Department to Fight Wildland Fires",
    authors: "Gerald Brown, Robert A. Koyak, Javier Salmerón, Zachary Scholz",
    venue: "INFORMS Journal on Applied Analytics (2021)",
    pdf: "/papers/Scholz NPS Thesis.pdf",
    external: "https://pubsonline.informs.org/doi/abs/10.1287/inte.2021.1084",
    summary:
      "Decision support for LACoFD to pre-position wildfire resources on red-flag days; prediction + optimization adopted by the department.",
  },
  {
    title:
      "Evaluation of HEU surrogate sources for use in training and modeling",
    authors: "Z. Scholz, M. Millett, M. Schell",
    venue: "NIM A (2018)",
    pdf: "/papers/Scholz USNA Thesis.pdf",
    external:
      "https://www.sciencedirect.com/science/article/abs/pii/S0168900218312002",
    summary:
      "Prompt-gamma surrogates (e.g., Gd) for safe, low-cost HEU detection training; strong spectral match around 186 keV.",
  },
];
---
<Layout title="Research — Zach Scholz" description="Optimization, geospatial analytics, decision-support.">
  <section class="research-wrap content" style="display:grid;gap:12px;justify-items:start;align-items:start;margin-inline:auto">
    <div class="spacer-md" aria-hidden="true"></div>

    <section class="accordion" aria-label="Research papers">
      {papers.map((p, i) => (
        <div class="acc" id={`acc-paper-${i}`}>
          <div class="acc-header">
            <button
              class="acc-btn"
              type="button"
              aria-expanded="false"
              aria-controls={`panel-paper-${i}`}
              id={`btn-paper-${i}`}
            >
              <span class="acc-toggle" aria-hidden="true"></span>
              <span class="sr-only" style="position:absolute;left:-10000px;">Toggle {p.title}</span>
            </button>
            <h1 class="acc-title" id={`title-paper-${i}`}>{p.title}</h1>
          </div>

          <div
            class="acc-panel"
            id={`panel-paper-${i}`}
            role="region"
            aria-labelledby={`title-paper-${i}`}
          >
            <p>{p.authors}</p>
            <p><em>{p.venue}</em></p>
            <p class="muted">{p.summary}</p>

            <ul class="stack gray-hover links" aria-label="Paper links" style="margin-top:.25rem">
              <li class="stack-item hoverable">
                <a href={encodeURI(p.pdf)} target="_blank" rel="noopener">PDF</a>
              </li>
              <li class="stack-item hoverable">
                <a href={p.external} target="_blank" rel="noopener">Publisher ↗</a>
              </li>
            </ul>
          </div>
        </div>
      ))}
    </section>
  </section>

  <!-- Accordion JS -->
  <script type="module">
    const accRoot = document.querySelector('.accordion');
    if (!accRoot) throw new Error('Accordion root not found');

    const accs = Array.from(accRoot.querySelectorAll('.acc'));

    function openPanel(panel, btn){
      panel.style.display = 'block';
      const start = panel.offsetHeight || 0;
      const target = panel.scrollHeight;
      panel.style.height = start + 'px';
      panel.getBoundingClientRect();
      panel.style.height = target + 'px';
      btn.setAttribute('aria-expanded', 'true');
      const onEnd = (ev)=>{ if(ev.propertyName!=='height')return; panel.removeEventListener('transitionend', onEnd); panel.style.height='auto'; };
      panel.addEventListener('transitionend', onEnd);
    }
    function closePanel(panel, btn){
      const current = panel.offsetHeight;
      panel.style.height = current + 'px';
      panel.getBoundingClientRect();
      panel.style.height = '0px';
      const onEnd = (ev)=>{ if(ev.propertyName!=='height')return; panel.removeEventListener('transitionend', onEnd); panel.style.display='none'; btn.setAttribute('aria-expanded','false'); };
      panel.addEventListener('transitionend', onEnd);
    }
    function toggle(acc){
      const btn = acc.querySelector('.acc-btn');
      const panel = acc.querySelector('.acc-panel');
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      if (expanded) closePanel(panel, btn); else openPanel(panel, btn);
    }

    accs.forEach(acc=>{
      const btn = acc.querySelector('.acc-btn');
      const title = acc.querySelector('.acc-title');
      const panel = acc.querySelector('.acc-panel');
      btn.setAttribute('aria-expanded','false');
      panel.style.display='none';
      panel.style.height='0px';
      btn.addEventListener('click', ()=>toggle(acc));
      btn.addEventListener('keydown', (e)=>{ if(e.key===' '||e.key==='Enter'){ e.preventDefault(); toggle(acc); } });
      title.addEventListener('click', ()=>toggle(acc));
    });
  </script>
</Layout>
